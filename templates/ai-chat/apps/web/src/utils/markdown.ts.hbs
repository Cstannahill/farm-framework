import { ReactNode } from 'react';

export const markdownComponents = {
a: ({ href, children }: { href?: string; children: ReactNode }) => (
<a href={href} target="_blank" rel="noopener noreferrer" className="text-primary underline hover:no-underline">
  {children}
</a>
),
pre: ({ children }: { children: ReactNode }) => (
<pre className="overflow-x-auto rounded-md bg-muted p-4 my-2">
      {children}
    </pre>
),
code: ({ children }: { children: ReactNode }) => (
<code className="px-1 py-0.5 rounded bg-muted text-sm">{children}</code>
),
};

/** Pull language id from a rehype class string. */
export function extractLanguage(className?: string): string | null {
const m = /language-(\w+)/.exec(className ?? '');
return m ? m[1] : null;
}

/** Collapse 3+ newlines to two and trim. */
export function formatMessageContent(content: string): string {
return content.replace(/\n{3,}/g, '\n\n').trim();
}